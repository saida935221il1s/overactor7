<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<#if channel ??>
<#assign title = "#" + channel.name>
<#else>
<#assign title = "@" + friend>
</#if>
<title>${title}</title>
<script type="text/javascript">
function receivedMessage(title, message, channel) {
	//alert(title + ", " + message + ", " + channel);
	// already succeed to get data...
	// todo - insert into html.
	
	// todo - call server.receivedMessage() 
}
</script>
</head>


<body>
<script type="text/javascript">
<#if channelEntered ??>
pushtalk.channelUpdated();
</#if>
</script>

<!-- Should be fixed on top  -->
<a href="/main?udid=${udid}">首页</a>
 | <a href="/channel?udid=${udid}">全部频道</a> 
<#if channel ??>
 | <a href="/channel/exit?udid=${udid}&channel_name=${channel.name}">退出频道</a> 
 | <a href="/channel/users?udid=${udid}&channel_name=${channel.name}">用户列表 (${channel.userCount})</a>
</#if>

<#if info ??>
<span style="color:blue;">${info}</span> <br/>
</#if>
<#if error ??>
<span style="color:red;">${error}</span><br />
</#if>

<!-- Here ajax to get Recent Chats.  
Condition:  received message but it is not with current chatting channel -->

<hr />


<!-- Should be fixed at the bottom -->
我想说：
<form action="/talk">
<input type="text" name="message" />
<#if channel ??>
<input type="hidden" name="channel_name" value="${channel.name}" />
<#else>
<input type="hidden" name="friend" value="${friend}" />
</#if>
<input type="hidden" name="udid" value="${udid}" />
<input type="submit" value=" 发送 "/>
</form>

</body>
</html>
